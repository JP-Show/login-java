<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<title>Insert title here</title>
	
	<script>
		function setDateFields() {
			console.log("hello world")
			let createAtField = document.getElementById('createAt');
			let lastUpdateField = document.getElementById('lastUpdate');

			let now = new Date().toISOString();
			if (createAtField) createAtField.value = now;
			if (lastUpdateField) lastUpdateField.value = now;
		}
	</script>
	
</h:head>
<h:body>
	<h:form prependId="false" onsubmit = "setDateFields();">
		<h3>Create User</h3>
		<label> name: <h:inputText value="#{userRegister.user.name}"/>
		</label>
		<label> Birth Date: <h:inputText converter="dateConverter" value="#{userRegister.user.birthDate}" />
		</label>
		<label> password: <h:inputText value="#{userRegister.user.password}"  />
		</label>
		 <h:inputHidden id="createAt" converter="zonedTimeConverter" value="#{userRegister.user.createAt}" />
		 <h:inputHidden  id="lastUpdate" converter="zonedTimeConverter" value="#{userRegister.user.lastUpdate}" /> <br/>
		 
		 <h:selectOneMenu value="#{userRegister.country}">
		 <f:selectItems value="#{countryCache.selectItems}" ></f:selectItems>
		 </h:selectOneMenu><br/>
		<!-- não tem como receber os parâmetros diretamente no método porque estamos usando o jsf 2.1 -->
		<h:commandButton value="send" action="#{userRegister.registerUser}"></h:commandButton>
		
	</h:form>
</h:body>
</html>